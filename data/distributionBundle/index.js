0,[e,r].concat(n));return""+r+o+e}))}else o||(O.debug(),o=!0),O.debug('Search for "'+a+'" and replace with',l().represent(s)+"."),r=r.replace(a,s)}catch(e){O.warn("\nCould not apply header transformation with source "+(t.source?l().represent(t.source):'"add"')+" and replacement "+(t.target?l().represent(t.target):'"remove"')+":",e)}},s=e(t);!(_=s()).done;)a();return r},M=function(){var r=i()(c().mark((function r(t,n,_,o){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,s){var i=n.socket,u=_.tls?d.connect:f.createConnection,c=_.tls&&443!==_.port||!_.tls&&80!==_.port?":"+_.port:"",p=u(a()({host:_.host,port:_.port},_.tls?{servername:_.host,rejectUnauthorized:!1}:{}),(function(){O.info("\nConnection to: http"+(_.tls?"s":"")+"://"+_.host+c+" established.")}));p.on("error",(function(e){O.error("Proxy to server error",e),s(e)}));var E=[{clientSocket:i,serverSocket:p},null,t,n,null,o,l()];if(_.headerTransformations.retrieve.length){var b=!1;p.on("data",(function(e){if(b)i.write(e);else{var t=e.toString();O.info("\n <=== Got response header from backend:\n\n"+t),t=g(t,_.headerTransformations.retrieve,E),O.info("\n <<<< Send response header to client:\n\n"+t),i.write(t),b=!0,r()}}))}else p.pipe(i);p.on("connect",(function(){for(var r,n,o=!1,a=e(t.socket.buffer.data);!(r=a()).done;)if(n=r.value,o)p.write(n);else{var s=n.toString();O.debug("\n ===> Got request header from client:\n\n"+s),_.tls&&(s=s.replace(/HTTP\/1\.0/i,"HTTP/1.1")),s=s.replace(/(($|\n)host: )[^\n]+/i,"$1"+_.host+c),s=g(s,_.headerTransformations.send,E),O.debug("\n >>>> Send request header to backend:\n\n"+s),p.write(s),o=!0}}))})));case 1:case"end":return r.stop()}}),r)})));return function(e,t,n,_){return r.apply(this,arguments)}}(),y=M})(),e.exports=o}()},,e=>{e.exports=require("@babel/runtime/helpers/extends")},e=>{e.exports=require("net")},e=>{e.exports=require("tls")},e=>{e.exports=require("http")},e=>{e.exports=require("http2")},e=>{e.exports=require("path")},e=>{e.exports=JSON.parse('{"DN":{"publicKeyPath":"","privateKeyPath":"","nodeServerOptions":{"allowHTTP1":true},"host":"localhost","port":8080,"parseBody":false,"forwarders":{"base":{"headerTransformations":{"retrieve":[],"send":[]},"host":"localhost","port":443,"stateAPIs":[{"data":{},"expressions":{"pre":"false","post":"true"},"name":"base","options":{},"url":""}],"tls":true,"useExpression":"true"}}}}')}],__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var t=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.loaded=!0,t.exports}__webpack_require__.c=__webpack_module_cache__,__webpack_require__.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=(e,r)=>{for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(__webpack_require__.s=3);module.exports=__webpack_exports__})();#!/usr/bin/env node
"use strict";if("undefined"!=typeof module&&null!==module&&"undefined"!==eval("typeof require")&&null!==eval("require")&&"main"in eval("require")&&"undefined"!==eval("typeof require.main")&&null!==eval("require.main")){var ORIGINAL_MAIN_MODULE=module;module!==eval("require.main")&&"paths"in module&&"paths"in eval("require.main")&&"undefined"!=typeof __dirname&&null!==__dirname&&(module.paths=eval("require.main.paths").concat(module.paths.filter((function(path){return eval("require.main.paths").includes(path)}))))}module===eval("require.main")&&module.paths.unshift("/application/node_modules"),(()=>{var __webpack_modules__=[e=>{e.exports=require("@babel/runtime/helpers/asyncToGenerator")},e=>{e.exports=require("@babel/runtime/regenerator")},e=>{e.exports=require("clientnode")},(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),clientnode__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),clientnode__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(clientnode__WEBPACK_IMPORTED_MODULE_2__),http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9),http__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(http__WEBPACK_IMPORTED_MODULE_3__),http2__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),http2__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(http2__WEBPACK_IMPORTED_MODULE_4__),path__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(11),path__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_5__),_helper__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4),_helper__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_helper__WEBPACK_IMPORTED_MODULE_6__),_package_json__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(12);function _createForOfIteratorHelperLoose(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}module=__webpack_require__.hmd(module);for(var _step,onIncomingMessage=function(e,r){var t=e;_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark((function e(){var n,_,o,a;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_helper__WEBPACK_IMPORTED_MODULE_6__.logging.info("|"+"-".repeat(78)+"|\nStart processing",t.method+" request: "+t.url+"\n"+t);case 1:return e.next=4,clientnode__WEBPACK_IMPORTED_MODULE_2___default().timeout();case 4:if(!t.socket.buffer.finished){e.next=6;break}return e.abrupt("break",8);case 6:e.next=1;break;case 8:if(CONFIGURATION.parseBody&&(0,_helper__WEBPACK_IMPORTED_MODULE_6__.addParsedContentToRequest)(t),null!==(n=(0,_helper__WEBPACK_IMPORTED_MODULE_6__.determineForwarder)(t,r,FORWARDERS))){e.next=15;break}return _helper__WEBPACK_IMPORTED_MODULE_6__.logging.error("No forwarder found for given request:",t),r.statusCode=502,r.end(),e.abrupt("return");case 15:return e.prev=15,e.next=18,(0,_helper__WEBPACK_IMPORTED_MODULE_6__.applyStateAPIs)(t,r,n);case 18:if(_=e.sent,o=_.result,a=_.scope,!o){e.next=24;break}return e.next=24,_helper__WEBPACK_IMPORTED_MODULE_6___default()(t,r,n,a);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(15),_helper__WEBPACK_IMPORTED_MODULE_6__.logging.error(e.t0);case 29:_helper__WEBPACK_IMPORTED_MODULE_6__.logging.info("\nEnd processing",t.method+" request: "+t.url+"\n"+t+"|"+"-".repeat(78)+"|");case 30:case"end":return e.stop()}}),e,null,[[15,26]])})))()},onIncomingStream=function(e,r){_helper__WEBPACK_IMPORTED_MODULE_6__.logging.info("Got stream",e,r)},BASE_CONFIGURATION=_package_json__WEBPACK_IMPORTED_MODULE_7__.DN,_iterator=_createForOfIteratorHelperLoose(["configuration.json","secure-configuration.json"]);!(_step=_iterator()).done;){var path=_step.value,configurationPath=(0,path__WEBPACK_IMPORTED_MODULE_5__.resolve)(process.cwd(),path);if(clientnode__WEBPACK_IMPORTED_MODULE_2___default().isFileSync(configurationPath)){var configuration=eval("require('"+configurationPath+"')");clientnode__WEBPACK_IMPORTED_MODULE_2___default().extend(!0,clientnode__WEBPACK_IMPORTED_MODULE_2___default().modifyObject(BASE_CONFIGURATION,configuration),configuration)}}var CONFIGURATION=clientnode__WEBPACK_IMPORTED_MODULE_2___default().evaluateDynamicData(BASE_CONFIGURATION,{configuration:BASE_CONFIGURATION,environment:process.env,Tools:clientnode__WEBPACK_IMPORTED_MODULE_2___default()}),FORWARDERS=(0,_helper__WEBPACK_IMPORTED_MODULE_6__.resolveForwarders)(CONFIGURATION.forwarders),server={instance:CONFIGURATION.publicKeyPath&&CONFIGURATION.privateKeyPath?(0,http2__WEBPACK_IMPORTED_MODULE_4__.createSecureServer)(CONFIGURATION.nodeServerOptions,onIncomingMessage):(0,http__WEBPACK_IMPORTED_MODULE_3__.createServer)(onIncomingMessage),streams:[],sockets:[],start:function(){server.instance.listen(CONFIGURATION.port,(function(){_helper__WEBPACK_IMPORTED_MODULE_6__.logging.info("Listen on port "+CONFIGURATION.port+" for incoming requests.")}))},stop:function(){server.instance.close((function(){_helper__WEBPACK_IMPORTED_MODULE_6__.logging.info("Shut server down.")}));for(var e,r=0,t=[server.sockets,server.streams];r<t.length;r++)if(e=t[r],Array.isArray(e))for(var n,_=_createForOfIteratorHelperLoose(e);!(n=_()).done;)n.value.destroy()}};if(server.instance.on("connection",(function(e){server.sockets.push(e),e.buffer={data:[],finished:!1},e.on("data",(function(r){e.buffer.data.push(r)}));for(var r,t=0,n=["done","finish","writableEnded","writableFinished"];t<n.length;t++)r=n[t],e.on(r,(function(){e.buffer.finished=!0}));clientnode__WEBPACK_IMPORTED_MODULE_2___default().timeout((function(){e.buffer.finished=!0})),e.on("close",(function(){e.buffer.finished=!0,server.sockets.splice(server.sockets.indexOf(e),1)}))})),server.instance.on("stream",(function(e,r){server.streams.push(e),onIncomingStream(e,r),e.on("close",(function(){server.streams.splice(server.streams.indexOf(e),1)}))})),__webpack_require__.c[__webpack_require__.s]===module||eval("require.main")!==__webpack_require__.c[__webpack_require__.s]&&void 0!==ORIGINAL_MAIN_MODULE&&ORIGINAL_MAIN_MODULE===eval("require.main")){_helper__WEBPACK_IMPORTED_MODULE_6__.logging.info("Start server with configuration:",clientnode__WEBPACK_IMPORTED_MODULE_2___default().represent(CONFIGURATION)),_helper__WEBPACK_IMPORTED_MODULE_6__.logging.debug("Apply resolved forwarder:",clientnode__WEBPACK_IMPORTED_MODULE_2___default().represent(FORWARDERS)),server.start();for(var _step3,_loop=function(){var e=_step3.value;process.on(e,(function(){_helper__WEBPACK_IMPORTED_MODULE_6__.logging.info('\nGot "'+e+'" signal: stopping server.'),server.stop()}))},_iterator3=_createForOfIteratorHelperLoose(clientnode__WEBPACK_IMPORTED_MODULE_2__.CloseEventNames);!(_step3=_iterator3()).done;)_loop()}const __WEBPACK_DEFAULT_EXPORT__=server},(e,r,t)=>{!function(){function r(e){var t=_[e];if(void 0!==t)return t.exports;var o=_[e]={exports:{}};return n[e](o,o.exports,r),o.exports}var n=[,function(e){e.exports=t(0)},function(e){e.exports=t(1)},function(e){e.exports=t(2)}],_={};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(function(){function e(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var _=0;return function(){return _>=e.length?{done:!0}:{done:!1,value:e[_++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}r.r(o),r.d(o,{EVALUATION_SCOPE_NAMES:function(){return E},addParsedContentToRequest:function(){return P},applyStateAPIs:function(){return v},default:function(){return y},determineForwarder:function(){return h},logging:function(){return O},resolveForwarders:function(){return m},reverseProxyBufferedRequest:function(){return M},transformHeaders:function(){return g}});var _=t(6),a=r.n(_),s=r(1),i=r.n(s),u=r(2),c=r.n(u),p=r(3),l=r.n(p),f=t(7),d=t(8),E=["data","error","request","response","stateAPI","stateAPIs","Tools"],b=function(){var e=i()(c().mark((function e(){var r,t,n,_=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=_.length,t=Array(r),n=0;n<r;n++)t[n]=_[n];return e.abrupt("return",new Promise((function(e,r){process.stdout.write(t.join(" ")+"\n",(function(t){return t?r(t):e()}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O={log:b,debug:b,info:b,error:b,warn:b},v=function(){var r=i()(c().mark((function r(t,n,_){var o,a,s,i,u,p,f,d,E,b,v,h,m,P,g,M;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o={},s=e(_.stateAPIs);case 2:if((i=s()).done){r.next=73;break}u=i.value,a=o[u.name]={configuration:u,error:null,response:null},p=!1,f=1,d=e(u.expressions.pre);case 8:if((E=d()).done){r.next=28;break}b=E.value,v=void 0;try{v=b(u.data,null,t,n,a,o,l())}catch(r){O.warn("Failed running pre "+f+". expression of state api:",r)}if("number"!=typeof v){r.next=17;break}return O.info("Break request caused by state api",'"'+u.name+'" with status code '+v+"."),n.statusCode=v,n.end(),r.abrupt("return",{result:!1,scope:o});case 17:if("break"!==v){r.next=19;break}return r.abrupt("break",28);case 19:if(f+=1,"boolean"!=typeof v){r.next=26;break}if(!v){r.next=25;break}p=!0,r.next=26;break;case 25:return r.abrupt("break",28);case 26:r.next=8;break;case 28:if(!p){r.next=71;break}if(O.info('Use state api: "'+u.name+'"'),h=null,u.urlExpression)try{u.url=u.urlExpression(u.data,null,t,n,a,o,l())}catch(r){O.warn("Failed running url expression:",r)}return O.debug("\nState api configuration is: "+l().represent(u)),r.prev=33,r.next=36,fetch(u.url,u.options);case 36:a.response=r.sent,r.next=43;break;case 39:r.prev=39,r.t0=r.catch(33),h=r.t0,O.warn('Running state api request for "'+u.name+'" throws',"error:",h);case 43:if(!(a.response&&a.response.headers.has("content-type")&&/application\/json(;.*)?$/.test(a.response.headers.get("content-type")))){r.next=54;break}return r.prev=44,r.next=47,a.response.json();case 47:a.response.data=r.sent,r.next=54;break;case 50:r.prev=50,r.t1=r.catch(44),h=r.t1,O.warn("Parsing state api json response for",'"'+u.name+'" throws error:',h);case 54:O.debug("\nState api response is:",l().represent(a.response)),f=1,m=e(u.expressions.post);case 57:if((P=m()).done){r.next=71;break}g=P.value,M=null;try{M=g(u.data,h,t,n,a,o,l())}catch(r){O.warn("Failed running "+f+". post expression of state api:",r)}if("number"!=typeof M){r.next=66;break}return O.info("Break request caused by state api",'"'+u.name+'" with status code '+M+"."),n.statusCode=M,n.end(),r.abrupt("return",{result:!1,scope:o});case 66:if("break"!==M){r.next=68;break}return r.abrupt("break",71);case 68:f+=1;case 69:r.next=57;break;case 71:r.next=2;break;case 73:return r.abrupt("return",{result:!0,scope:o});case 74:case"end":return r.stop()}}),r,null,[[33,39],[44,50]])})));return function(){return r.apply(this,arguments)}}(),h=function(r,t,n){for(var _,o=e(Object.entries(n).sort((function(e,r){var t=e[0],n=r[0];return t.localeCompare(n)})));!(_=o()).done;){var a,s=_.value,i=s[0],u=s[1],c={configuration:u,error:null,response:null};if(u.useExpression(u,null,r,t,c,((a={})[i]=c,a),l()))return O.info('Determined forwarder is: "'+i+'".'),u}return null},m=function(r){for(var t={},n=0,_=Object.entries(r);n<_.length;n++){var o=_[n],s=o[0],i=o[1];if("base"!==s){for(var u,c=l().extend(!0,{name:s},l().modifyObject(l().copy(r.base),i),i),p={retrieve:[],send:[]},f=e(["retrieve","send"]);!(u=f()).done;)for(var d,b=u.value,O=function(){var e=d.value,r=a()({},e,{sourceRun:function(){return""},targetRun:function(){return""}});if(Object.prototype.hasOwnProperty.call(r,"source"))if(r.source instanceof RegExp)r.sourceRun=function(){return r.source};else if("string"==typeof r.source){var t=l().stringCompile(r.source,E);if(t.error)throw new Error(t.error);r.sourceRun=t.templateFunction}else r.sourceRun=r.source;if(Object.prototype.hasOwnProperty.call(r,"target"))if("string"==typeof r.target){var n=l().stringCompile(r.target,E);if(n.error)throw new Error(n.error);r.targetRun=n.templateFunction}else r.targetRun=r.target;p[b].push(r)},v=e([].concat(c.headerTransformations[b]));!(d=v()).done;)O();c.headerTransformations=p;for(var h,m,P=[],g=[].concat(c.stateAPIs||[]),M=g.filter((function(e){return"base"===e.name}))[0],y=[],D=e(g);!(h=D()).done;)"base"!==(m=h.value).name&&y.push(l().extend(!0,{},l().modifyObject(l().copy(M),m),m));for(var A,I=0,w=y;I<w.length;I++){if("string"==typeof(A=w[I]).urlExpression){var T=l().stringCompile(A.urlExpression,E);if(T.error)throw new Error(T.error);A.urlExpression=T.templateFunction}for(var k,R={pre:[],post:[]},x=e([].concat((null==(C=A.expressions)?void 0:C.pre)||[]));!(k=x()).done;){var C,U=k.value;if("string"==typeof U){var q=l().stringCompile(U,E);if(q.error)throw new Error(q.error);R.pre.push(q.templateFunction)}else R.pre.push(U)}for(var L,B=e([].concat((null==(K=A.expressions)?void 0:K.post)||[]));!(L=B()).done;){var K,W=L.value;if("string"==typeof W){var S=l().stringCompile(W,E);if(S.error)throw new Error(S.error);R.post.push(S.templateFunction)}else R.post.push(W)}A.expressions=R,P.push(A)}if(c.stateAPIs=P,"string"==typeof c.useExpression){var N=l().stringCompile(c.useExpression,E);if(N.error)throw new Error(N.error);c.useExpression=N.templateFunction}t[s]=c}}return t},P=function(e){if(e.headers["content-type"]&&/application\/json(;.*)?$/.test(e.headers["content-type"]))try{var r=Buffer.concat(e.socket.buffer.data).toString();e.socket.buffer.body=r.replace(/^[\s\S]+\s*\n\s*\n\s*([\s\S]+)$/m,"$1"),e.socket.buffer.content=JSON.parse(e.socket.buffer.body)}catch(r){O.warn("Error parsing given request.",e)}},g=function(r,t,n){for(var _,o=!1,a=function e(){var t=_.value;try{var a=t.sourceRun.apply(t,n),s=t.targetRun.apply(t,n);if([null,void 0].includes(a)||"string"==typeof a&&""===a.trim()){if([null,void 0].includes(s)||"string"==typeof s&&""===s.trim())return 1;r=r.replace(/(\s*\n)\s*\n\s*/,(function(e,r){for(var t=arguments.length,n=Array(2<t?t-2:0),_=2;_<t;_++)n[_-2]=arguments[_];var o="string"==typeof s?s:s.apply(void 